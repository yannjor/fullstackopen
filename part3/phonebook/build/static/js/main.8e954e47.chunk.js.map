{"version":3,"sources":["AddPersonForm.js","Person.js","Persons.js","SearchFilter.js","Notification.js","App.js","index.js"],"names":["AddPersonForm","addPerson","newName","newNumber","setNewName","setNewNumber","onSubmit","type","value","onChange","event","target","Person","person","deletePerson","name","number","onClick","Persons","persons","filter","map","key","personsFiltered","toLowerCase","includes","SearchFilter","setFilter","Notification","message","error","successStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","style","App","useState","setPersons","notificationMsg","setNotificationMsg","setError","db_url","timeout","setTimeout","useEffect","axios","get","then","res","data","preventDefault","some","window","confirm","find","p","changedPerson","put","concat","id","catch","err","console","log","response","newPerson","post","delete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8e954e47.chunk.js","sourcesContent":["import React from \"react\";\n\nconst AddPersonForm = ({\n  addPerson,\n  newName,\n  newNumber,\n  setNewName,\n  setNewNumber,\n}) => {\n  return (\n    <>\n      <h2>Add new</h2>\n      <form onSubmit={addPerson}>\n        <div>\n          Name:{\" \"}\n          <input\n            type=\"text\"\n            value={newName}\n            onChange={(event) => setNewName(event.target.value)}\n          />\n        </div>\n        <div>\n          Number:{\" \"}\n          <input\n            type=\"tel\"\n            value={newNumber}\n            onChange={(event) => setNewNumber(event.target.value)}\n          ></input>\n        </div>\n        <div>\n          <button type=\"submit\">Add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default AddPersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <p>\n      {person.name} {person.number}{\" \"}\n      <button onClick={() => deletePerson(person)}>Delete</button>\n    </p>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, filter, deletePerson }) => {\n  if (filter === \"\") {\n    return (\n      <>\n        {persons.map((person) => (\n          <Person\n            key={person.name}\n            person={person}\n            deletePerson={deletePerson}\n          />\n        ))}\n      </>\n    );\n  } else {\n    const personsFiltered = persons.filter((person) =>\n      person.name.toLowerCase().includes(filter.toLowerCase())\n    );\n    return (\n      <>\n        {personsFiltered.map((person) => (\n          <Person\n            key={person.name}\n            person={person}\n            deletePerson={deletePerson}\n          />\n        ))}\n      </>\n    );\n  }\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst SearchFilter = ({ filter, setFilter }) => {\n  return (\n    <>\n      Filter:{\" \"}\n      <input\n        type=\"text\"\n        value={filter}\n        onChange={(event) => setFilter(event.target.value)}\n      ></input>\n    </>\n  );\n};\n\nexport default SearchFilter;\n","import React from \"react\";\n\nconst Notification = ({ message, error }) => {\n  if (!message) {\n    return null;\n  }\n\n  const successStyle = {\n    color: \"green\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 15,\n  };\n\n  const errorStyle = { ...successStyle, color: \"red\" };\n\n  return <div style={error ? errorStyle : successStyle}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport AddPersonForm from \"./AddPersonForm\";\nimport Persons from \"./Persons\";\nimport SearchFilter from \"./SearchFilter\";\nimport Notification from \"./Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notificationMsg, setNotificationMsg] = useState(null);\n  const [error, setError] = useState(false);\n\n  const db_url = \"/api/persons\";\n\n  const timeout = () => {\n    setTimeout(() => {\n      setNotificationMsg(null);\n      setError(false);\n    }, 5000);\n  };\n\n  useEffect(() => {\n    axios.get(db_url).then((res) => {\n      setPersons(res.data);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    if (persons.some((person) => person.name === newName)) {\n      if (\n        window.confirm(\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const person = persons.find((p) => p.name === newName);\n        const changedPerson = { ...person, number: newNumber };\n        axios\n          .put(db_url.concat(`/${person.id}`), changedPerson)\n          .then((res) => {\n            setPersons(persons.map((p) => (p.id === person.id ? res.data : p)));\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotificationMsg(`Updated number for ${newName}`);\n            timeout();\n          })\n          .catch((err) => {\n            console.log(err.response.data);\n            setError(true);\n            setNotificationMsg(\n              `Information of ${newName} has already been removed from server`\n            );\n            timeout();\n          });\n      }\n    } else {\n      const newPerson = { name: newName, number: newNumber };\n      axios\n        .post(db_url, newPerson)\n        .then((res) => {\n          newPerson.id = res.data.id;\n          setPersons(persons.concat(newPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotificationMsg(`Added ${newName}`);\n          timeout();\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          setError(true);\n          setNotificationMsg(error.response.data.error);\n          timeout();\n        });\n    }\n  };\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      axios.delete(db_url.concat(`/${person.id}`)).then((res) => {\n        setPersons(persons.filter((p) => p.id !== person.id));\n        setNotificationMsg(`Deleted ${person.name}`);\n        timeout();\n      });\n    }\n  };\n\n  return (\n    <>\n      <h1>Phonebook</h1>\n      <Notification message={notificationMsg} error={error} />\n      <SearchFilter filter={filter} setFilter={setFilter} />\n      <AddPersonForm\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} deletePerson={deletePerson} />\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}